<template>
    <tr class={rowClass} onfieldchange={handleInputChange} style="height: 0">
        <td class="cell-field slds-cell-wrap" lwc:dom="manual" lwc:ref="field"></td>
        <td class="cell-value slds-cell-wrap">
            <!-- Value -->
            <div class="slds-grid slds-grid_align-spread">
                <template lwc:if={isInfoDisplayed}>
                    <!-- INFO Mode -->
                    <span class="slds-scrollable_x" lwc:dom="manual" lwc:ref="type"></span>
                </template>
                <template lwc:else>
                    <!-- VALUE Mode -->
                    <template lwc:if={isReadOnly}>
                        <span class="slds-scrollable_x" lwc:dom="manual" lwc:ref="value"></span>
                    </template>
                    <template lwc:else>
                        <slds-input-field field-name={name} lwc:ref="inputfield"></slds-input-field>
                    </template>
                </template>
                <!-- Actions -->
                <div class="right-actions">
                    <template lwc:if={isDependentPicklistDisplayed}>
                        <lightning-button-icon
                            alternative-text="Dependent Picklist"
                            disabled={isLoading}
                            icon-name="utility:crossfilter"
                            onclick={handleDependentPicklistClick}
                            tooltip={tooltip_dependentPicklist}
                            variant="bare"></lightning-button-icon>
                    </template>
                    <template lwc:if={isInfoDisplayed}>
                        <!-- Only for info displayed-->
                    </template>
                    <template lwc:else>
                        <!-- Default -->
                        <template lwc:if={isUndoDisplayed}>
                            <lightning-button-icon
                                alternative-text="undo"
                                icon-name="utility:undo"
                                onclick={handleUndoClick}
                                variant="bare"></lightning-button-icon>
                        </template>
                        <template lwc:elseif={isEditButtonDisplayed}>
                            <lightning-button-icon
                                alternative-text="edit"
                                icon-name="utility:edit"
                                onclick={handleEditClick}
                                variant="bare"></lightning-button-icon>
                        </template>
                        <template lwc:elseif={isFormula}>
                            <lightning-button-icon
                                alternative-text="formula"
                                icon-name="utility:formula"
                                onclick={handleFormulaClick}
                                tooltip={tooltip_formula}
                                variant="bare"></lightning-button-icon>
                        </template>
                        <template lwc:elseif={isNotEditable}>
                            <lightning-button-icon
                                alternative-text="lock"
                                disabled
                                icon-name="utility:lock"
                                variant="bare"></lightning-button-icon>
                        </template>
                    </template>
                </div>
            </div>
        </td>
        <td class="cell-action slds-cell-wrap">
            <template lwc:if={isCopyDisplayed}>
                <lightning-button-icon
                    alternative-text="copy"
                    icon-name="utility:copy"
                    onclick={handleCopyClick}
                    variant="bare"></lightning-button-icon>
            </template>
        </td>
    </tr>
</template>
