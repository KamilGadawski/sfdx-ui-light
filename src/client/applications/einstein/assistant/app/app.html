<template>
    <div class="slds-flex-column slds-full-height slds-light-bg">
        <slds-tabset variant="scoped" class="slds-without-tab slds-full-height" onaddtab={handleAddTab} onclosetab={handleCloseTab} is-add-tab-enabled>
            <template for:each={formattedTabs} for:item="item">
                <slds-tab class="full-page-body" key={item.id} label={item.name} value={item.id} onactive={handleSelectTab} is-closeable={item.isCloseable}>
                    <!-- Dialogs -->
                    <assistant-dialog key={item.id} 
                        openai-key={openaiKey} 
                        openai-assistant-id={openaiAssistantId}
                        thread-id={item.threadId}
                    ></assistant-dialog>
                </slds-tab>
            </template>
        </slds-tabset>
        <template lwc:if={isLoading}>
            <lightning-spinner alternative-text="Loading"></lightning-spinner>
        </template>
    </div>
    
</template>