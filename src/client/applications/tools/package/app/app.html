<template>
    <div class={pageClass}>
        <builder-editor>
            <builder-header slot="header" title="Tools" sub-title="Package Import/Export" icon-name="standard:maintenance_asset">
                <div slot="actions" class="slds-builder-toolbar__actions">
                    
                    <lightning-button icon-name="utility:link" label="Deployment Manager" onclick={goToUrl} data-url="/lightning/setup/DeployStatus/home"></lightning-button>
                    <!-- For Deploy -->
                    <template lwc:if={isDeployVisible}>
                        <template lwc:if={isNewDeploymentButtonDisplayed}>
                            <lightning-button class="slds-p-left_xx-small"  label={i18n.PACKAGE_NEW_DEPLOYMENT} icon-name="utility:new" onclick={handleNewDeployment} disabled={isDeploymentRunning}></lightning-button>
                        </template>
                        <template lwc:else>
                            <lightning-button class="slds-p-left_xx-small" variant="brand" label={i18n.PACKAGE_DEPLOY} icon-name="utility:right" onclick={handleDeploy} disabled={isDeploymentRunning}></lightning-button>
                        </template>
                    </template>
                    <!-- For Retrieve -->
                    <template lwc:if={isRetrieveVisible}>
                        <template lwc:if={isRunning}>
                            <lightning-button class="slds-p-left_xx-small" variant="destructive" label={i18n.EDITOR_PANEL_ABORT} icon-name="utility:clear" onclick={handleAbort}></lightning-button>
                        </template>
                        <template lwc:else>
                            <lightning-button class="slds-p-left_xx-small" variant="brand" label={i18n.PACKAGE_RETRIEVE} icon-name="utility:right" onclick={handleRetrieve} disabled={isRetrieveRunning}></lightning-button>
                        </template>
                    </template>
                    
                    <!--
                    <template lwc:else>
                        <lightning-button class="slds-p-left_xx-small" variant="destructive" label={i18n.EDITOR_PANEL_ABORT} icon-name="utility:clear" onclick={handleAbort} disabled={isLoading}></lightning-button>
                    </template>
                    -->
                </div>
                <p slot="meta" class="slds-page-header__meta-text">
                    Currently in Beta
                </p>
                <!--
                    <div slot="subactions" class="slds-builder-toolbar__actions">
                        <lightning-button-icon-stateful class="slds-p-left_xx-small" selected={isDebugLogToggle} variant="border-filled" icon-name="utility:bug" size="large" onclick={toggle_debugLog}></lightning-button-icon-stateful>    
                        <lightning-button-icon-stateful class="slds-p-left_xx-small" selected={isRecentToggled}  variant="border-filled" icon-name="utility:budget_period"  size="large" onclick={handleRecentToggle}></lightning-button-icon-stateful>
                    </div>
                -->
            </builder-header>
            <article class="full-page-body slds-card">
                <div class="slds-is-relative slds-full-width slds-full-height slds-flex-column" style="min-height:200px;">
                    <template lwc:if={isLoading}>
                        <lightning-spinner alternative-text="Loading"></lightning-spinner>
                    </template>
                    <!-- Content -->
                    <!-- Tabs -->
                    <slds-tabset lwc:ref="tab" variant="scoped" class="slds-without-tab" active-tab-value={currentMethod} is-remove-tab-event-disabled>
                        <slds-tab key={i18n.TAB_DEPLOY} label={i18n.TAB_DEPLOY} value={i18n.TAB_DEPLOY} onactive={handleSelectMethod}></slds-tab>
                        <slds-tab key={i18n.TAB_RETRIEVE} label={i18n.TAB_RETRIEVE} value={i18n.TAB_RETRIEVE} onactive={handleSelectMethod}></slds-tab>
                    </slds-tabset>
                    
                    <!-- DEPLOY -->
                    <div class={deployClass}>
                        <package-deploy lwc:ref="deploy" class="slds-full-height" application-name={applicationName}></package-deploy>
                    </div>
                    <!-- RETRIEVE -->
                    <div class={retrieveClass}>
                        <package-retrieve lwc:ref="retrieve" class="slds-full-height" application-name={applicationName}></package-retrieve>
                    </div>

                </div>
            </article>
            <!-- Panel -->

            
        </builder-editor>
    </div>
</template>